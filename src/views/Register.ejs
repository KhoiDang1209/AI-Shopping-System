<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register page</title>
    <link rel="stylesheet" href="/css/Register.css">
</head>

<body>
    <div class="container">
        <img src="/images/login.png" alt="Login page">
        <div class="Title">Register</div>
        <div class="Register_form">
            <form action="/registerUser" method="post">
                <fieldset>
                    <legend>Register</legend>
                    <div class="input-group">
                        <label>Country: </label>
                        <select name="country" id="country" required>
                            <option value="">--Select a country--</option>
                            <% countries.forEach(function(country, index) { %>
                                <option>
                                    <%= country.name %>
                                </option>
                                <% }); %>
                        </select>
                    </div>
                    <div class="input-row">
                        <div class="input-group">
                            <label>First Name:</label>
                            <input type="text" name="firstname" required>
                        </div>
                        <div class="input-group">
                            <label>Last Name:</label>
                            <input type="text" name="lastname" required>
                        </div>
                    </div>

                    <div class="input-group">
                        <div class="input-row">
                            <div class="input-group">
                                <label>Unit Number:</label>
                                <input type="text" name="unitnumber" required>
                            </div>
                            <div class="input-group">
                                <label>Street number:</label>
                                <input type="text" name="streetnumber" required>
                            </div>
                        </div>
                    </div>

                    <div class="input-group" id="city-container">
                        <label>City: </label>
                        <input type="text" name="city" id="city" required>
                    </div>
                    <div class="input-group">
                        <label>Address line 1: </label>
                        <input type="text" name="Addressline1" required>
                    </div>
                    <div class="input-group">
                        <label>Address line 2: </label>
                        <input type="text" name="Addressline2" required>
                    </div>
                    <div class="input-group">
                        <label>Postal code: </label>
                        <input type="text" name="Postalcode" required>
                    </div>
                    <div class="input-group">
                        <label>Email: </label>
                        <input type="text" name="email" required>
                    </div>
                    <div class="input-group">
                        <label>User Name: </label>
                        <input type="text" name="username" required>
                    </div>
                    <div class="input-group">
                        <label>Password: </label>
                        <input type="password" name="password" required>
                    </div>
                    <div class="input-group">
                        <label for="Dob">Date Of Birth:</label>
                        <input type="date" id="dob" name="dob" min="1900-01-01" max="2025-12-31" required>
                    </div>
                    <div class="input-group">
                        <label for="Dob">Phone Number:</label>
                        <input type="text" name="PhoneNumber" required>
                    </div>
                    <div>
                        <button type="submit">Register</button>
                    </div>
                </fieldset>
            </form>
            <div class="input-group">
                <label>Already have account? </label>
            </div>
            <div class="Login">
                <form action="/" method="get">
                    <button type="submit">Login</button>
                </form>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            document.getElementById('country').addEventListener('change', function () {
                const selectedCountry = this.value;
                const cityContainer = document.getElementById('city-container');

                if (selectedCountry === 'VIET NAM') {
                    // Replace input with dropdown for Vietnamese cities
                    cityContainer.innerHTML = `
                        <div class="input-group">
                            <label for="city">City:</label>
                            <select name="city" id="city" required>
                                <option value="">--Select a City--</option>
                                <% listCitys.forEach(function(city, index) { %>
                                    <option>
                                        <%= city.name %>
                                    </option>
                                <% }); %>
                            </select>
                        </div>
                    `;
                } else {
                    // Replace dropdown with text input for other countries
                    cityContainer.innerHTML = `
                        <label>City: </label>
                        <input type="text" name="city" id="city" required>
                    `;
                }
            });
        });
    </script>
</body>

</html>